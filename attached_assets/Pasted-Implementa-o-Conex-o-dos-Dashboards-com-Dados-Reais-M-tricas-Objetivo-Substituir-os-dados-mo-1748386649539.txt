Implementa√ß√£o: Conex√£o dos Dashboards com Dados Reais (M√©tricas)
üéØ Objetivo:
Substituir os dados mockados dos dashboards j√° existentes no sistema por m√©tricas reais, fornecidas via endpoints no back-end, respeitando o perfil e setor do usu√°rio logado.

‚úÖ Etapas T√©cnicas
1. Criar Endpoints no Backend
Arquivos:

src/server/routes/metrics.ts

src/server/services/metrics.ts

Endpoint base:

ts
Copiar
Editar
GET /api/metrics
Esse endpoint deve identificar automaticamente o tipo e setor do usu√°rio logado e retornar os KPIs apropriados.

2. L√≥gica de Resposta por Perfil
üë®‚Äçüíº Usu√°rios Internos (Administradores da empresa)
Casos ativos

Notifica√ß√µes pendentes

Acordos realizados

KPIs por setor (opcional)

üßë‚Äçüíª Analistas Internos da Opera√ß√£o
O sistema deve identificar o setor do analista: prospec√ß√£o, verifica√ß√£o, auditoria, log√≠stica, IP Tools, atendimento ou financeiro

Para cada setor, retornar apenas os KPIs relevantes

Exemplo:

Atendimento: atendimentos realizados, follow-ups agendados, casos em negocia√ß√£o

IP Tools: n√∫mero de URLs encontradas, tempo m√©dio para verifica√ß√£o

Log√≠stica: envios pendentes, documentos impressos

Financeiro: pagamentos processados, indeniza√ß√µes confirmadas

üë• Clientes
Perfil: Gestor
Casos totais

Casos ativos

Total de indeniza√ß√µes

Taxa de sucesso

Tempo m√©dio de resolu√ß√£o

Mapa por estado

Ranking de analistas

Casos por marca

Perfil: Analista (cliente)
Casos aprovados

Taxa de aprova√ß√£o

Notifica√ß√µes enviadas

Casos urgentes

Tempo m√©dio de aprova√ß√£o

Perfil: Financeiro (cliente)
Receita total

Pagamentos pendentes

Pagamentos em atraso

Ticket m√©dio

Taxa de recebimento

Perfil: Cliente comum
Casos totais, ativos, resolvidos

Casos aguardando aprova√ß√£o

Performance mensal

Casos recentes

Marcas gerenciadas

3. Requisitos T√©cnicos
Middleware de autentica√ß√£o e identifica√ß√£o de perfil + setor

Respeitar o escopo de dados permitido por perfil

Otimizar para performance: consultas agregadas eficientes

Os dashboards no frontend j√° est√£o criados ‚Üí n√£o precisa gerar componentes de UI, apenas fornecer os dados reais no formato apropriado

Filtros por per√≠odo, status e marca devem ser considerados nos dados retornados, se existirem nos dashboards

4. Observa√ß√µes Finais
A estrutura j√° tem redirecionamento autom√°tico para o dashboard correto com base no perfil

Os dados atualmente est√£o mockados, aguardando esses endpoints reais

Essa implementa√ß√£o deve preservar a estrutura de dashboards existente e simplesmente injetar os dados reais no frontend

A estrutura deve estar preparada para expans√£o futura (novos KPIs e setores)