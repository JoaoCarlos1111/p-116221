Tela de Cria√ß√£o de Template (.docx ‚Üí PDF)
üìç Rota
/admin/templates/new

üß± Estrutura da Tela
T√≠tulo da p√°gina:
Novo Template de Documento

üñãÔ∏è Formul√°rio
Campo	Tipo	Observa√ß√µes
Nome do Template	Input text	Ex: ‚ÄúNotifica√ß√£o Extrajudicial‚Äù
Tipo do Template	Select	Op√ß√µes: Notifica√ß√£o Extrajudicial, Acordo Extrajudicial, Outros
Upload do .docx	File Upload	Aceita apenas arquivos .docx
Campos din√¢micos	Lista lateral ou colaps√°vel	Exibe os campos suportados
Barra de busca de campos	Search input	Busca entre campos din√¢micos suportados
Visualiza√ß√£o do modelo	PDF preview (readonly)	Mostra uma renderiza√ß√£o do template

üß† Regras de Substitui√ß√£o de Campos
Ao fazer o upload do .docx, o sistema deve:

Identificar automaticamente os campos din√¢micos no formato {{campo}}

Exibir um preview do PDF com marca√ß√µes substitu√≠veis

Exibir uma lista com os campos reconhecidos (colaps√°vel √† direita ou abaixo)

üîÑ A√ß√µes
Bot√£o	A√ß√£o
Salvar Template	Salva o template e o ativa para uso

üìå Regras de Neg√≥cio Importantes
Se o tipo do template for Notifica√ß√£o Extrajudicial, o sistema deve gerar automaticamente o documento em PDF quando o caso for aprovado pelo cliente.

Se for Acordo Extrajudicial, o sistema deve gerar automaticamente o documento quando o caso for movido para "Proposta aceita" no setor Atendimento.

üß© Campos Din√¢micos Suportados
Campos que podem ser usados no .docx:

{{nome_cliente}}

{{nome_marca}}

{{numero_processo}}

{{endereco_infrator}}

{{data}}

{{nome_advogado}}

{{codigo_caso}}

{{tipo_infracao}}

{{link_arquivo}} (para casos com links ou URLs associados)

üõ†Ô∏è Tecnologias Recomendadas
Etapa	Tecnologia
Upload de .docx	react-dropzone, input type=file
Leitura e Parse do .docx	mammoth.js (frontend) ou python-docx (backend)
Gera√ß√£o de PDF	docx-pdf, LibreOffice headless, ou docx2pdf
Visualiza√ß√£o do PDF	react-pdf (baseado em PDF.js)

üîß Backend ‚Äì L√≥gica T√©cnica (Resumo)
Salvar o .docx como modelo com metadados (nome, tipo, campos reconhecidos)

Armazenar o arquivo original

Ao acionar o gatilho (por fluxo do caso), substituir os {{campos}} com os dados reais

Gerar PDF

Armazenar PDF gerado vinculado ao caso

Permitir download e visualiza√ß√£o na interface do caso

‚ú® Futuro (n√£o obrigat√≥rio agora)
Controle de vers√£o de templates

Op√ß√£o de duplicar template

Marcar como inativo

Templates de texto puro (sem PDF)

Agrupamento por tipo de uso

